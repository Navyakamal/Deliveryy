"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[98969],{2655:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(43193),s=i(25565),a=i(22949);const o={tiny:1,small:4,regular:8},r=[o.tiny,o.small],l=[o.small,o.tiny],d=function(){let{maxDots:e=0,pageId:t=0,dotsSize:i,dotsSizeSequence:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.from({length:e},((e,s)=>({pageId:t+s,dotSize:i||n[s]||o.regular})))};var c=i(33990);const u=(0,s.zo)("ol",{display:"flex",justifyContent:"center",alignItems:"center"}),p=(0,s.zo)("li",(e=>{let{$theme:t,$filled:i,$inversedDotColor:n,$dotsSize:s=8,$margin:o=4}=e;return{borderRadius:"50%",width:"".concat(s,"px"),height:"".concat(s,"px"),margin:"0 ".concat(o,"px"),cursor:"pointer",...i?{background:n?t.colors.black:t.colors.white}:{background:n?(0,a.uE)(t.colors.black,.24):(0,a.uE)(t.colors.white,.6)}}}));const m=function(e){const{currentPage:t,pages:i,inversedDotColor:s,fullDots:a=!0,dotsSize:m}=e,h=n.useMemo((()=>a?4:8),[a]),g=n.useMemo((()=>function(){let{currentPage:e=0,pages:t=1,startFrom:i=0,dots:n=5,outermostDots:s=2,fullDots:a=!0,dotsSize:c=o.regular}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a)return d({maxDots:t,pageId:i,dotsSize:c});if(t<=1)return d({maxDots:1,pageId:i,dotsSize:o.regular});const u=t-1;e=Math.min(Math.max(e,i),u);const p=e+1,m=Math.min(t,n),h=Math.max(p-m,0),g=Math.max(Math.min(h,s),0),f=Math.max(p-m-g,0),S=f+g,v=Math.max(t-m,0),w=p>m?t-p:v,y=Math.max(Math.min(w,s),0),x=d({maxDots:g,pageId:f,dotsSizeSequence:1===g?r.slice(1):r}),b=d({maxDots:m,pageId:S,dotsSize:o.regular}),I=b[b.length-1].pageId+1,Z=d({maxDots:y,pageId:I,dotsSizeSequence:1===w&&g>0?[o.regular]:l});return[...x,...b,...Z]}({currentPage:t,pages:i,fullDots:a,dotsSize:m})),[t,i,a,m]);return(0,c.tZ)(u,{children:g.map((t=>{let{pageId:i,dotSize:n}=t;return(0,c.tZ)(p,{$inversedDotColor:s,$filled:i===e.currentPage,$dotsSize:n,$margin:h,onClick:t=>{t.stopPropagation(),e.onClick(i)}},i)}))})}},57690:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(25565),s=i(14773),a=i(2655),o=i(40783),r=i(33990);const l=(0,n.zo)("ol",{display:"flex",justifyContent:"center",alignItems:"center"}),d=(0,n.zo)("li",(e=>{let{$dotsSize:t=4,$theme:i}=e;return{borderRadius:"50%",width:"".concat(2*t,"px"),height:"".concat(2*t,"px"),margin:"0 3px",background:i.colors.backgroundPrimary}}));const c=function(e){return(0,r.tZ)(l,{children:[...Array(e.pages).keys()].map((t=>(0,r.tZ)(d,{$dotsSize:t===e.currentPage?(e.dotsSize||0)+2:e.dotsSize,onClick:i=>{i.stopPropagation(),e.onClick(t)}},t)))})};var u=i(43193),p=i(67588),m=i(66351),h=i(54088),g=i(26518);const f=(0,n.zo)("div",{padding:"8px",boxSizing:"border-box",position:"absolute",bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"flex-start",overflowY:"hidden",overflowX:"scroll",flexWrap:"nowrap",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},boxShadow:"0px -4px 16px rgba(0, 0, 0, 0.12)",scrollBehavior:"smooth",transition:g.pB.default});function S(e){let{currentDisplayIndex:t,slides:i,renderPaginationSlide:n,onClick:s,paginationSlideSize:a}=e;const o=u.useRef(null),l=(0,h.gm)();return u.useEffect((()=>{if(!o.current)return;const e=o.current.scrollWidth;if(t>=3)if("ltr"===l)o.current.scrollLeft=(t-3)*(a+8);else{const i=e-(t-3)*(a+8);o.current.scrollLeft=i}else("ltr"===l&&o.current.scrollLeft>=t*(a+8)||"rtl"===l&&e-o.current.scrollLeft<t*(a+8))&&(o.current.scrollLeft=t*(a+8))}),[t,a,l]),(0,r.tZ)(f,{ref:o,children:(0,r.tZ)(p.Z,{separator:()=>(0,r.tZ)(m.ZP,{$width:"8px"}),children:i.map(((e,i)=>(0,r.tZ)("div",{onClick:()=>s(i),children:n({slide:e,isActive:i===t,index:i})},i)))})})}const v=(0,n.zo)("div",(e=>{let{$height:t,$overflowVisible:i,$disabled:n}=e;return{position:"relative",width:"100%",overflow:i?"visible":"hidden",...t?{height:t}:{},pointerEvents:"".concat(n?"none":"auto")}})),w=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",bottom:0,width:"100%",padding:"".concat(t.sizing.scale500," 0")}})),y=(0,n.zo)("div",(e=>{let{$dotsBottomPosition:t="16px"}=e;return{bottom:t,position:"absolute",padding:0,margin:"0 auto",width:"100%"}}));function x(e){const{displaySlides:t,displayIndex:i,displayOffset:n,useTransition:l,stopAutoScroll:d,changeDisplaySlide:u,onTransitionEnd:p}=(0,o.Z)({slides:e.slides,pageSize:1,autoScrollInterval:e.autoScrollInterval,onSlidesDisplayed:e.onSlidesDisplayed,initialIndex:e.initialIndex,isInfinite:e.isInfinite,peekAnimation:e.peekAnimation});return 0===e.slides.length?null:1===e.slides.length&&e.slides[0]?(0,r.tZ)(v,{$height:e.height,children:(0,r.tZ)(s.M,{$as:"div",$margin:e.margin,children:e.renderSlide({slide:e.slides[0],carouselSlideProps:{isDummy:!1,isVisible:!0,index:0}})})}):(0,r.BX)(v,{$height:e.height,$overflowVisible:e.overflowVisible,$disabled:e.disabled,children:[(0,r.tZ)(s.Z,{displayIndex:i,displayOffset:n,displaySlides:t,onSwipe:d,renderSlide:e.renderSlide,useTransition:l,onTransitionEnd:()=>{if(p(),"function"==typeof e.onTransitionEnd){const t=e.slides[i];e.onTransitionEnd(i,t)}},changeDisplaySlide:u,margin:e.margin,isInfinite:e.isInfinite,width:e.width}),"regular"===e.dotsType?(0,r.tZ)(y,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,r.tZ)(a.Z,{dotsSize:e.dotsSize,pages:e.slides.length,inversedDotColor:e.inversedDotColor,currentPage:i,fullDots:e.fullDots,onClick:e=>{u({index:e})}})}):null,"large"===e.dotsType?(0,r.tZ)(w,{children:(0,r.tZ)(y,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,r.tZ)(c,{dotsSize:e.dotsSize,pages:e.slides.length,currentPage:i,onClick:e=>{u({index:e})}})})}):null,e.paginationSlideProps?(0,r.tZ)(S,{currentDisplayIndex:i,slides:e.slides,renderPaginationSlide:e.paginationSlideProps.renderPaginationSlide,onClick:e=>u({index:e}),paginationSlideSize:e.paginationSlideProps.slideSize}):null]})}},14773:(e,t,i)=>{i.d(t,{M:()=>m,Z:()=>h});var n=i(36151),s=i(43193),a=i(25565);const o={swipeStart:null,swipeStartY:0,swipeOffset:0,lastSwipeStartTime:0,didLastSwipeStartAsTouch:!1,isSwipe:null};function r(e,t){let{x:i,y:n,timestamp:s}=t,a=e.isSwipe;if(e.swipeStart&&null===a&&s-e.lastSwipeStartTime>60){const t=Math.abs(i-e.swipeStart),s=Math.abs(n-e.swipeStartY);a=t>8&&s<50}return a}function l(e,t){switch(t.type){case"swipe start":return{isSwipe:null,swipeStart:t.x,swipeStartY:t.y,swipeOffset:0,lastSwipeStartTime:t.timestamp,didLastSwipeStartAsTouch:t.isTouch};case"swipe move":if(e.swipeStart){const{x:i,y:n,timestamp:s}=t;return{...e,swipeOffset:t.x-e.swipeStart,isSwipe:r(e,{x:i,y:n,timestamp:s})}}return e;case"swipe end":return o;default:throw new Error}}const d=e=>{e.cancelable&&e.preventDefault()};var c=i(54088),u=i(33990);const p=(0,a.zo)("ol",(e=>({margin:0,padding:0,display:"flex",userSelect:"none",willChange:"transform",...e.$useTransition?{transition:"transform 200ms ease-in-out"}:{}}))),m=(0,a.zo)("li",(e=>{let{$margin:t,$width:i}=e;return{width:"".concat(null!=i?i:100,"%"),margin:"0 ".concat(t/2,"px"),flex:"none",display:"flex"}}));function h(e){let{displaySlides:t,renderSlide:i,displayIndex:a,displayOffset:h,useTransition:g,onTransitionEnd:f,onSwipe:S,changeDisplaySlide:v,margin:w,width:y=100,isInfinite:x}=e;const b=(0,n.useRef)(null),I=(0,c.gm)(),Z=t.findIndex((e=>{let{displayIndex:t}=e;return t===a})),T=t.length-1,E=Z===T;!function(e){let{swipeTargetRef:t,onSwipeEnd:i,onSwipeMove:s}=e;const a=!0,[c,u]=(0,n.useReducer)(l,o),p=(0,n.useCallback)((e=>{e instanceof TouchEvent&&1!==e.touches.length||u({type:"swipe start",x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,timestamp:e.timeStamp,isTouch:!0})}),[]),m=(0,n.useCallback)((e=>{e.preventDefault(),c.didLastSwipeStartAsTouch&&Math.abs(e.timeStamp-c.lastSwipeStartTime)<200||u({type:"swipe start",x:e.pageX,y:e.pageY,timestamp:e.timeStamp,isTouch:!1})}),[c.didLastSwipeStartAsTouch,c.lastSwipeStartTime]),h=(0,n.useCallback)((e=>{if(e instanceof TouchEvent&&1!==e.touches.length)return;const{x:t,y:i}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};r(c,{x:t,y:i,timestamp:e.timeStamp})&&c.swipeStart&&s(t-c.swipeStart),u({type:"swipe move",x:t,y:i,timestamp:e.timeStamp})}),[c,s]),g=(0,n.useCallback)((e=>{if(e instanceof TouchEvent&&0!==e.touches.length)return;const{x:t,y:n}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};r(c,{x:t,y:n,timestamp:e.timeStamp})&&c.swipeStart&&i(t-c.swipeStart),u({type:"swipe end"})}),[c,i]);(0,n.useEffect)((()=>{const e=Math.abs(c.swipeOffset)>8&&a;return e&&document.addEventListener("touchmove",d,{passive:!1}),()=>{e&&document.removeEventListener("touchmove",d,{passive:!1})}}),[c.swipeOffset,a]),(0,n.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchstart",p,{passive:!0}),e.addEventListener("mousedown",m)),()=>{e&&(e.removeEventListener("touchstart",p,{passive:!0}),e.removeEventListener("mousedown",m))}}),[t,p,m]),(0,n.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchmove",h,{passive:!1}),e.addEventListener("touchend",g,{passive:!0})),()=>{e&&(e.removeEventListener("touchmove",h,{passive:!1}),e.removeEventListener("touchend",g,{passive:!0}))}}),[t,h,g,a]),(0,n.useEffect)((()=>{const e=c.swipeStart&&!c.didLastSwipeStartAsTouch;return e&&(document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)),()=>{e&&(document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g))}}),[c.swipeStart,c.didLastSwipeStartAsTouch,h,g])}({swipeTargetRef:b,onSwipeMove:(0,n.useCallback)((e=>{const t=0===a?1:-1,i=(a===T&&e<0||0===a&&e>0)&&!x,n=Math.abs(e)>40?40*t:e;v({index:a,offset:i?n:e,useTransition:!1}),S&&S()}),[a,v,S,T,x]),onSwipeEnd:(0,n.useCallback)((e=>{Math.abs(e)<40?v({index:a,offset:0}):e<0?v({index:"ltr"===I?"forward":"back"}):e>0&&v({index:"ltr"===I?"back":"forward"})}),[a,v,I])});const P=s.useMemo((()=>t.map(((e,t)=>{let{slide:n,displayIndex:s,isDummy:o}=e;return(0,u.tZ)(m,{"aria-hidden":!!o||void 0,$margin:w,$width:y,children:i({slide:n,carouselSlideProps:{isDummy:o,isVisible:s===a,index:t}})},s)}))),[i,t,a,w,y]),D="ltr"===I?-1:1;return(0,u.tZ)(p,{$useTransition:g,style:{transform:"translateX(".concat(Z*D*y-D*(E?100-y:0),"%)")+" "+"translateX(".concat(h,"px)")+"translateX(".concat(Z*D*w+D*w/2,"px)")},ref:b,onTransitionEnd:f,children:P})}},98969:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(52671),s=i(73235),a=i(57690),o=i(70737),r=i(55900),l=i(24739),d=i(27640),c=i(24618),u=i(33990);const p=e=>{let{cardCarousel:t,surface:i,verticalPosition:p}=e;const m=t.template||"",{filteredItems:h,initialIndex:g,onSlidesDisplayed:f}=(0,r.Z)(t.carouselItems||[],i,m,p);if(!h.length)return null;const S=(0,d.N)(t),v=(0,d.f)(S),w=1===h.length,y=w?0:s.yf,x=w?0:t.shouldAutoScroll&&i===n.cx.HOME_FEED_ITEM?v||4e3:0;return(0,u.tZ)(l.K2,{children:(0,u.tZ)(l.qY,{$centerPadding:s.Ub,children:(0,u.tZ)(a.Z,{autoScrollInterval:x,initialIndex:g,slides:h,renderSlide:e=>{let{slide:t,carouselSlideProps:n}=e;return(0,u.tZ)(o.Z,{slides:h,template:m,slide:t,surface:i,verticalPosition:p,carouselSlideProps:n,eaterMessageStyles:(0,c.fG)(i,m)})},onSlidesDisplayed:f,margin:y,dotsType:"disabled",overflowVisible:!0,width:m===n._u.SMALL?s.Dg:100})})})};var m=i(36151);n._u.REGULAR,n._u.SMALL;var h=i(59092),g=i(56533),f=i(51991),S=i(53854);const v=e=>{var t;let{cardItem:i,surface:n,verticalPosition:s}=e;const[a,o]=(0,m.useState)(!1),r=(0,h.ZP)(),l=(0,m.useMemo)((()=>{var e;return{uuid:i.uuid||"",trackingID:(null===(e=i.metadata)||void 0===e?void 0:e.trackingID)||"",itemType:"cardItemPayload",verticalPosition:s}}),[i.uuid,null===(t=i.metadata)||void 0===t?void 0:t.trackingID,s]),d=(0,m.useMemo)((()=>({eaterMessage:{...l,surface:n}})),[l,n]);(0,m.useEffect)((()=>{r("eats:eater_message_view",d)}),[r,d]);const c=i.cardItem,p=e=>{e.stopPropagation(),e.preventDefault(),o(!0),r("eats:eater_message_dismiss",d)};switch(null==c?void 0:c.type){case"systemBanner":{var v;if(a)return null;const{systemBanner:e}=c,t=()=>(0,u.tZ)(f.Z,{dismissAction:p,systemBanner:e,systemBannerStyles:{getContentPadding:()=>({padding:"16px"})}});return(0,u.tZ)(S.Z,{messageKey:"system-banner",children:null!==(v=e.cta)&&void 0!==v&&v.action?(0,u.tZ)(g.ZP,{linkStyleType:g.co.BANNER,action:e.cta.action,actionTrackingID:e.cta.trackingID||"",surface:n,analytics:l,children:t()}):t()})}}return null},w=e=>{let{eaterMessage:{payload:t,surfaceId:i},feedIndex:n=0}=e;if(!t)return null;let s=null;switch(t.type){case"cardCarousel":s=(0,u.tZ)(p,{cardCarousel:t.cardCarousel,surface:i||"",verticalPosition:n});break;case"cardItemPayload":s=(0,u.tZ)(v,{cardItem:t.cardItemPayload,surface:i||"",verticalPosition:n})}return s?(0,u.tZ)(u.HY,{children:s}):null}}}]);